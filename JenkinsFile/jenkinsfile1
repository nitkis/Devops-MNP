pipeline {
    agent {label "mnp-app-slave"}
    stages{
		stage ("create user") {
			steps {
				sh "sudo useradd my-user5"
				}
			}
		stage ("list all users on home path") {
			steps {
			sh "ls -l /home"
			}
			}
			
		stage ("create a directory") {
            steps {
                sh "sudo mkdir /tmp/pipeline7"
            }
        }
		
        stage ("creating a file") {
                 steps {
                    sh '''
                    sudo touch /tmp/pipeline7/test1.txt
                    sudo chown -R jenkins:jenkins /tmp/pipeline7
                    sudo chmod -R 775 /tmp/pipeline7
                    sudo echo "Hi, we are learning devops in MNP. And MNP is a nice place to learn new tech" >> /tmp/pipeline7/test1.txt
                    '''
                 }
            }
		stage ("display file before replacing the word") {
			steps {
				sh "cat /tmp/pipeline7/test1.txt"
				}
		}
		stage ("replacing MNP with MNPTech") {
			steps {
			sh "sudo sed 's/MNP/MNPTech/g' /tmp/pipeline7/test1.txt >> /tmp/pipeline7/test2.txt"
			}
		
		}
		stage ("display the new file after replacing the word in old file") {
			steps {
				sh "cat /tmp/pipeline7/test2.txt"
				}
		}	
		
	}
	
	post {
        success {
            sh '''
            echo "BUild is sucess"
            '''
        }
        failure {
            sh '''
            echo "Build is failed"
            '''
        }
    }
}
